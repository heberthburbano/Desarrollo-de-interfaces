/* style.css - Ingeniería visual Modern Trello 2025 (Versión Optimizada) */

/* ========================================= */
/* 0. VARIABLES DINÁMICAS (SISTEMA ATLASSIAN) */
/* ========================================= */
:root {
    /* Color N30 Solicitado (Fondo Barra y Listas) */
    --dynamic-background: hsl(270, 2.9%, 91.3%);
    
    /* Texto Oscuro Principal */
    --dynamic-text: #172B4D;
    --dynamic-text-transparent: hsla(218, 54%, 19.6%, 0.16);
    
    /* Botones Header (Sobre fondo claro) */
    --dynamic-button-primary: rgba(9, 30, 66, 0.08); /* Gris suave */
    --dynamic-button-hovered: rgba(9, 30, 66, 0.14); /* Gris un poco más oscuro */
    --dynamic-button-text: #172B4D;
    
    /* Inputs */
    --dynamic-input-bg: #FFFFFF;
    --dynamic-input-border: #DFE1E6;
    --dynamic-icon: #42526E;
}

/* Modo Oscuro (Variables Invertidas) */
.dark {
    --dynamic-background: #1D2125;
    --dynamic-text: #9FADBC;
    --dynamic-text-transparent: rgba(255, 255, 255, 0.4);
    
    --dynamic-button-primary: rgba(255, 255, 255, 0.12); 
    --dynamic-button-hovered: rgba(255, 255, 255, 0.2);
    --dynamic-button-text: #FFFFFF;
    
    --dynamic-input-bg: #22272B;
    --dynamic-input-border: #454F59;
    --dynamic-icon: #9FADBC;
}

/* CLASES DE UTILIDAD PARA LA NAV (OPTIMIZADO) */
.trello-nav {
    /* Usamos el color N30 sólido solicitado */
    background-color: var(--dynamic-background) !important;
    color: var(--dynamic-text) !important;
    border-bottom: 1px solid rgba(0,0,0,0.08);
    /* MEJORA: Quitamos blur innecesario para rendimiento */
    backdrop-filter: none; 
    transition: background-color 0.2s ease, color 0.2s ease;
}

/* Botones de la Nav */
.trello-nav-btn {
    background-color: var(--dynamic-button-primary) !important;
    color: var(--dynamic-button-text) !important;
}

.trello-nav-btn:hover {
    background-color: var(--dynamic-button-hovered) !important;
}

/* Input de Búsqueda */
.trello-search-input {
    background-color: var(--dynamic-input-bg) !important;
    border: 1px solid var(--dynamic-input-border) !important;
    color: var(--dynamic-text) !important;
}
.trello-search-input::placeholder {
    color: var(--dynamic-text-transparent);
}

/* MEJORA: Focus exacto de Trello */
.trello-search-input:focus {
    border-color: #0079BF !important;
    box-shadow: 0 0 0 2px rgba(0, 121, 191, 0.2) !important; /* Anillo sutil pero definido */
    outline: none !important;
}
.dark .trello-search-input:focus {
    border-color: #579DFF !important;
    box-shadow: 0 0 0 2px rgba(87, 157, 255, 0.2) !important;
}

/* ========================================= */
/* 1. RESET Y BASE (Lienzo Fijo) */
/* ========================================= */
html, body {
    height: 100%;
    margin: 0;
    padding: 0;
    overflow: hidden; /* CRÍTICO: Previene que la web entera haga scroll */
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    color: #172B4D; /* Color N800 */
    -webkit-font-smoothing: antialiased;
}

/* ========================================= */
/* 2. LAYOUT DEL TABLERO (Grid Horizontal) */
/* ========================================= */
.board-view-container {
    display: flex;
    flex-direction: column;
    height: 100vh;
    background-color: #0079BF; /* Azul Clásico Trello por defecto */
    transition: background-color 0.5s ease, background-image 0.2s ease;
    background-size: cover;
    background-position: center;
}

/* CORRECCIÓN: Fondo oscuro para el tablero en modo Dark (si no hay imagen) */
.dark .board-view-container {
    background-color: #0f172a !important; /* Slate 900 */
}

/* CORRECCIÓN: Velo oscuro para leer sobre imágenes de fondo */
.board-view-container::before {
    content: '';
    position: absolute;
    inset: 0;
    background: rgba(0, 0, 0, 0.15); /* Sutil oscurecimiento */
    pointer-events: none;
    z-index: 0;
}
.board-view-container > * {
    position: relative;
    z-index: 1;
}

/* Header secundario (Donde está el nombre del tablero) */
/* Necesita ser transparente para ver la imagen, pero con texto legible */
.board-view-container > div:first-of-type {
    background-color: rgba(0, 0, 0, 0.24); /* Un poco más oscuro para contraste */
    backdrop-filter: blur(4px);
}

.board-canvas {
    flex-grow: 1;
    position: relative;
    display: grid;
    /* INGENIERÍA: Grid horizontal forzado */
    grid-auto-flow: column; 
    /* MEDIDA EXACTA: 272px por lista, el estándar de oro de Trello */
    grid-auto-columns: 272px; 
    grid-template-rows: 100%; /* CORRECCIÓN: Altura completa */
    gap: 12px; /* Espaciado entre listas */
    padding: 12px;
    padding-bottom: 8px; /* Ajuste para scrollbar */
    overflow-x: auto !important; /* CORRECCIÓN: Forzar scroll horizontal */
    overflow-y: hidden;
    align-items: start; /* Las listas cuelgan de arriba */
    justify-content: start; /* CORRECCIÓN: Evitar centrado extraño */
}

/* ========================================= */
/* 3. COMPONENTE: LISTA */
/* ========================================= */
.list-wrapper {
    width: 272px; /* Ancho fijo */
    box-sizing: border-box;
    display: inline-block;
    vertical-align: top;
    white-space: nowrap;
}

.list {
    background-color: #EBECF0; /* N30 - Fondo de lista estándar */
    border-radius: 12px; /* Estética moderna 2025 */
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    max-height: calc(100vh - 100px); /* Cálculo para permitir que la lista crezca sin salirse */
    position: relative;
    white-space: normal;
    border: 1px solid rgba(0,0,0,0.05); /* Sutil borde para definición */
}

/* Modo oscuro para listas (manual override) */
.dark .list {
    background-color: #1e293b; /* Slate 800 */
    border-color: #334155;
    color: #f1f5f9;
}

.list-header {
    flex: 0 0 auto;
    padding: 10px 12px;
    position: relative;
    min-height: 20px;
    cursor: pointer;
    font-weight: 600;
    font-size: 14px;
    color: #172B4D;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.dark .list-header {
    color: #f1f5f9;
}

/* Contenedor interno de tarjetas (Scroll vertical independiente) */
.cards-container {
    flex: 1 1 auto;
    overflow-y: auto; /* Scroll vertical dentro de la lista */
    overflow-x: hidden;
    margin: 0 4px;
    padding: 0 4px 4px 4px;
    min-height: 2px; /* Necesario para el Drag&Drop en listas vacías */
    display: flex;
    flex-direction: column;
    gap: 8px; /* Separación vertical entre tarjetas */
}

/* ========================================= */
/* 4. COMPONENTE: TARJETA */
/* ========================================= */
.list-card {
    background-color: #ffffff; /* N0 Blanco puro */
    border-radius: 8px; /* Radio moderno */
    /* SOMBRA EXACTA: Da profundidad sin bordes grises toscos */
    box-shadow: 0 1px 0 rgba(9, 30, 66, 0.25); 
    cursor: pointer;
    display: block;
    margin-bottom: 0px;
    min-height: 20px;
    position: relative;
    text-decoration: none;
    z-index: 0;
    transition: background-color 0.1s, transform 0.1s;
    padding: 8px; /* Padding interno de la tarjeta */
}

.dark .list-card {
    background-color: #334155; /* Slate 700 */
    box-shadow: 0 1px 0 rgba(0, 0, 0, 0.5);
    color: #f8fafc;
}

.list-card:hover {
    background-color: #F4F5F7; /* N20 Hover state */
}

.dark .list-card:hover {
    background-color: #475569;
}

/* Estilos de Drag & Drop */
.list-card.dragging {
    transform: rotate(3deg) !important; /* Rotación física al arrastrar */
    opacity: 0.9;
    background-color: #e6f7ff; /* Color sutil al arrastrar */
    z-index: 9999;
    cursor: grabbing;
}

.dark .list-card.dragging {
    background-color: #1e3a8a;
}

.cards-container.drag-over {
    background-color: rgba(0, 0, 0, 0.05);
    border-radius: 8px;
    transition: all 0.2s ease;
}

/* ========================================= */
/* 5. ESTILIZACIÓN DE SCROLLBARS (Tipo "Píldora") */
/* ========================================= */
.board-canvas::-webkit-scrollbar {
    height: 12px;
    width: 12px;
}
.board-canvas::-webkit-scrollbar-thumb {
    background-color: rgba(255, 255, 255, 0.4);
    border-radius: 6px;
}
.board-canvas::-webkit-scrollbar-track {
    background-color: rgba(0, 0, 0, 0.15);
    border-radius: 6px;
    margin: 8px;
}

.cards-container::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}
.cards-container::-webkit-scrollbar-thumb {
    background-color: #D2D4D9;
    border-radius: 4px;
}
.dark .cards-container::-webkit-scrollbar-thumb {
    background-color: #475569;
}

/* 6. CLASES AUXILIARES PARA LÓGICA JS */
.hide-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
}
.hide-scrollbar::-webkit-scrollbar {
    display: none;
}

/* ========================================= */
/* 6. ETIQUETAS, PORTADAS Y BADGES */
/* ========================================= */

/* Etiquetas Expandibles */
.card-label {
    height: 8px;
    width: 40px;
    border-radius: 4px;
    display: inline-block;
    margin-right: 4px;
    margin-bottom: 4px;
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    color: transparent;
    font-size: 0;
    line-height: 0;
    vertical-align: middle;
    cursor: pointer;
}
.card-label:hover {
    filter: brightness(0.9); 
    height: 10px;
}
.card-label.expanded {
    width: auto; 
    height: auto;
    min-height: 16px;
    padding: 0 8px; 
    color: inherit; 
    font-size: 11px;
    font-weight: 700;
    line-height: 16px;
    text-shadow: none;
    display: inline-flex;
    align-items: center;
}

/* Colores de Etiquetas (Accesibilidad) */
.bg-green-500.card-label.expanded { background-color: #61BD4F; color: white; }
.bg-yellow-500.card-label.expanded { background-color: #F2D600; color: #172B4D; } 
.bg-orange-500.card-label.expanded { background-color: #FF9F1A; color: white; }
.bg-red-500.card-label.expanded { background-color: #EB5A46; color: white; }
.bg-purple-500.card-label.expanded { background-color: #C377E0; color: white; }
.bg-blue-500.card-label.expanded { background-color: #0079BF; color: white; }

/* Portada de tarjeta */
.card-cover {
    height: 32px;
    border-radius: 8px 8px 0 0;
    margin: -8px -8px 8px -8px; /* Negativo para cubrir padding */
    background-size: cover;
    background-position: center;
}

/* Badge de fecha vencida/próxima */
.due-date-badge {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    font-size: 11px;
    padding: 2px 4px;
    border-radius: 3px;
    color: white;
}
.due-date-ok { background-color: transparent; color: #5e6c84; }
.due-date-soon { background-color: #F2D600; color: white; } /* Amarillo */
.due-date-overdue { background-color: #EB5A46; color: white; } /* Rojo */

/* ========================================= */
/* 7. FÍSICA Y MICRO-INTERACCIONES (Trello 2025) */
/* ========================================= */

/* 1. Física de Arrastre (Drag & Drop Physics) */
.list-card.dragging {
    transform: rotate(3deg) !important; 
    box-shadow: 0 12px 24px -6px rgba(9, 30, 66, 0.25), 0 0 0 1px rgba(9, 30, 66, 0.08) !important;
    opacity: 0.9;
    z-index: 9999;
    cursor: grabbing;
}

.drag-over {
    background-color: rgba(9, 30, 66, 0.04); 
    border: 2px dashed rgba(9, 30, 66, 0.1);
    border-radius: 8px;
    transition: all 0.2s ease;
}

/* ========================================= */
/* 8. ESTILOS DE CHECKLIST Y PORTADAS AVANZADAS */
/* ========================================= */

.checklist-progress-bar {
    height: 4px;
    background-color: #DFE1E6; /* Gris base */
    border-radius: 2px;
    overflow: hidden;
    margin-top: 4px;
    width: 100%;
}

.checklist-progress-value {
    height: 100%;
    background-color: #5BA4CF; /* Azul progreso */
    transition: width 0.2s ease;
}

.checklist-progress-value.complete {
    background-color: #61BD4F; /* Verde completado */
}

/* Estilos para ítems del checklist en el modal */
.checklist-item {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 4px 0;
    position: relative; /* Fixed: 'group' is not valid css property */
    transition: opacity 0.2s ease;
}

/* Cuando un item está completado, bajamos su opacidad */
.checklist-item input:checked + span {
    color: #5e6c84;
    text-decoration: line-through;
    opacity: 0.7;
}

.dark .checklist-item input:checked + span {
    color: #94a3b8;
}

.checklist-item:hover .delete-item-btn {
    opacity: 1;
}

.delete-item-btn {
    opacity: 0;
    color: #eb5a46;
    cursor: pointer;
    transition: opacity 0.2s;
    margin-left: auto;
    padding: 2px;
}

/* Animación para el botón de Ocultar/Mostrar */
#hide-checklist-btn {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    font-weight: 500;
    transition: background-color 0.2s;
}

/* Modo Banner (Imagen Arriba) */
.card-cover-image {
    height: 120px; /* Altura estándar de banner */
    background-size: cover;
    background-position: center;
    border-radius: 8px 8px 0 0;
    margin: -8px -8px 8px -8px; /* Cubrir padding del padre */
}

/* Corrección Visual de Portada Emoji */
.list-card div[class*="h-[32px]"] {
    margin: -8px -8px 8px -8px !important; /* Negativo para ir de borde a borde */
    border-radius: 8px 8px 0 0 !important;
    background-color: #F4F5F7; /* Color de fondo gris suave (Trello default) */
}
.dark .list-card div[class*="h-[32px]"] {
    background-color: #334155; /* Slate 700 */
    border-bottom: 1px solid #475569;
}

/* Modo Fondo Completo (Full Cover) */
.list-card.full-cover {
    min-height: 200px;
    background-size: cover;
    background-position: center;
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    padding-bottom: 12px;
    position: relative;
}

/* Sombra interior para leer texto sobre imagen */
.list-card.full-cover::before {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    top: 0;
    background: linear-gradient(to bottom, rgba(0,0,0,0) 50%, rgba(0,0,0,0.6) 100%);
    border-radius: 8px;
    z-index: 1;
}

/* Ajuste de texto en Full Cover */
.list-card.full-cover .card-title {
    color: white !important;
    font-weight: 700;
    font-size: 16px;
    z-index: 2;
    text-shadow: 0 1px 2px rgba(0,0,0,0.5);
    margin-bottom: 4px;
}

/* Ocultar elementos en Full Cover para limpieza visual */
.list-card.full-cover .card-cover,
.list-card.full-cover .card-description-icon, 
.list-card.full-cover .checklist-progress-bar {
    display: none; 
}

/* Badge de fecha en Full Cover (debe ser legible) */
.list-card.full-cover .due-date-badge {
    background-color: rgba(0,0,0,0.4);
    color: white;
    z-index: 2;
}

/* Estilos de Adjuntos en Modal */
.attachment-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 8px;
    border-radius: 4px;
    transition: background 0.1s;
}
.attachment-item:hover {
    background-color: rgba(9, 30, 66, 0.04);
}
.attachment-thumbnail {
    width: 80px;
    height: 60px;
    background-size: cover;
    background-position: center;
    border-radius: 4px;
    background-color: #ebecf0;
}

/* ========================================= */
/* 9. COMPONENTES DE UI Y PANELES */
/* ========================================= */

.sidebar-btn {
    display: flex;
    align-items: center;
    gap: 10px; /* Espacio entre icono y texto */
    width: 100%;
    text-align: left;
    padding: 8px 12px;
    background-color: #EAECF0; /* Gris Trello N30 */
    border-radius: 3px;
    color: #172B4D; /* Texto N800 */
    font-size: 14px;
    font-weight: 500;
    margin-bottom: 8px;
    transition: background-color 0.1s ease;
    border: none;
    cursor: pointer;
}

.sidebar-btn:hover {
    background-color: #DCDFE4; /* Gris más oscuro al hover */
}

.sidebar-btn i {
    width: 16px;
    height: 16px;
    flex-shrink: 0; /* Evita que el icono se aplaste */
    color: #42526E; /* Icono N500 */
}

/* Modo oscuro para botones */
.dark .sidebar-btn {
    background-color: #334155;
    color: #F1F5F9;
}
.dark .sidebar-btn:hover {
    background-color: #475569;
}
.dark .sidebar-btn i {
    color: #94A3B8;
}

/* Avatares */
.member-avatar {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    background-color: #DFE1E6;
    color: #172B4D;
    font-size: 10px;
    font-weight: 700;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 2px solid white; /* Borde blanco para solapamiento */
    cursor: pointer;
}

/* Avatares en la Tarjeta (Miniaturas) */
.card-members {
    display: flex;
    margin-top: 4px;
    justify-content: flex-end; /* A la derecha */
}
.card-members .member-avatar {
    margin-left: -4px; /* Efecto solapado (stack) */
}

/* Avatares en la Cabecera del Tablero */
.header-avatar {
    width: 28px;
    height: 28px;
    font-size: 12px;
    border: none;
    margin-right: -4px;
    background-color: #ebecf0;
}

/* Modal de Selección de Miembros (Simple) */
.member-select-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 8px;
    cursor: pointer;
    border-radius: 4px;
}
.member-select-item:hover {
    background-color: #F4F5F7;
}
.member-select-item.selected {
    background-color: #E4F0F6;
    color: #0079BF;
}

/* Resultados de Búsqueda */
#search-results {
    top: 100%;
    left: 0;
    width: 100%;
    max-height: 500px;
    overflow-y: auto;
    background: white;
    border-radius: 8px;
    box-shadow: 0 8px 16px -4px rgba(9, 30, 66, 0.25), 0 0 0 1px rgba(9, 30, 66, 0.08);
    margin-top: 4px;
    z-index: 1000;
}

.search-result-item {
    padding: 10px 12px;
    cursor: pointer;
    border-bottom: 1px solid #091e420d;
    transition: background 0.1s;
}

.search-result-item:hover {
    background-color: #F4F5F7;
}

.search-result-item.keyboard-selected {
    background-color: #E6F0FF;
    border-left: 3px solid #0079BF;
}

/* Resaltado de texto coincidente */
.search-result-highlight {
    background-color: #FEF3C7; /* Amarillo suave */
    color: #78350F;
    font-weight: 700;
    border-radius: 2px;
    padding: 0 2px;
}

/* Badges de Tipo (Chip de color) */
.result-type-badge {
    font-size: 10px;
    font-weight: 700;
    text-transform: uppercase;
    padding: 2px 6px;
    border-radius: 4px;
    margin-right: 8px;
    display: inline-block;
}

.result-type-board { background-color: #E6FCFF; color: #008DA6; }
.result-type-list  { background-color: #FFF0B3; color: #172B4D; }
.result-type-card  { background-color: #E4F7FA; color: #42526E; }

/* Breadcrumbs (Migas de pan) */
.result-breadcrumbs {
    font-size: 11px;
    color: #5E6C84;
    display: flex;
    align-items: center;
    gap: 4px;
    margin-top: 4px;
}

/* Actividad */
.activity-item {
    padding: 10px 0;
    border-bottom: 1px solid #091e420d;
    font-size: 14px;
    color: #172B4D;
}

.activity-meta {
    font-size: 12px;
    color: #5E6C84;
    margin-top: 4px;
}

.activity-user {
    font-weight: 700;
    color: #172B4D;
}

/* Botón "Añadir tarjeta" en modo oscuro */
.dark .add-card {
    color: #94a3b8; 
}
.dark .add-card:hover {
    background-color: rgba(255, 255, 255, 0.1);
    color: #f1f5f9;
}

/* Modal de selección de fondo */
.bg-picker-option {
    width: 100%;
    height: 60px;
    border-radius: 8px;
    cursor: pointer;
    background-size: cover;
    background-position: center;
    transition: transform 0.1s, box-shadow 0.1s;
    position: relative;
}
.bg-picker-option:hover {
    transform: scale(1.05);
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
}

/* ========================================= */
/* 10. ADAPTACIÓN MÓVIL (Snap Scrolling) */
/* ========================================= */
@media (max-width: 768px) {
    /* 1. CAMBIO DE GRID A CARRUSEL */
    .board-canvas {
        /* En móvil, la lista ocupa el 85% del ancho para ver un poco de la siguiente */
        grid-auto-columns: 85vw; 
        
        /* Espacio visual a la derecha para 'affordance' */
        padding-right: 15vw; 
        
        /* FÍSICA MAGNÉTICA: Obliga a detenerse exactamente en una lista */
        scroll-snap-type: x mandatory; 
        
        /* Mayor separación entre listas en móvil */
        gap: 16px; 
    }

    /* 2. COMPORTAMIENTO DE LA LISTA */
    .list-wrapper {
        /* Punto de anclaje: la lista siempre se centra al soltar el dedo */
        scroll-snap-align: center;
        
        /* Margen de seguridad para que no se pegue al borde izquierdo */
        scroll-margin-inline: 16px; 
    }

    /* 3. ALTURA DINÁMICA */
    /* Ajuste crítico para navegadores móviles con barra de URL flotante */
    .board-view-container {
        height: 100dvh; /* 'dvh' = Dynamic Viewport Height */
    }

    .list {
        /* Restamos cabecera (48px) y dejamos un margen inferior seguro */
        max-height: calc(100dvh - 80px); 
    }

    /* 4. LIMPIEZA DE UI (Ocultar elementos de escritorio) */
    /* En móvil ocultamos avatares del header y textos largos para ganar espacio */
    .board-view-container #members-preview, 
    .board-view-container #invite-member-btn span {
        display: none;
    }
    
    /* Convertir botón "Compartir" en solo icono */
    .board-view-container #invite-member-btn {
        padding: 8px;
        background-color: rgba(255, 255, 255, 0.2);
    }
    
    /* Ocultar barra lateral si se quedó abierta */
    .sidebar-active {
        display: none;
    }
}

/* ========================================= */
/* 11. FORZAR COLOR DE BARRA SUPERIOR (OVERRIDE TAILWIND) */
/* ========================================= */

/* IMPORTANTE: Esta sección debe estar al final del archivo para sobrescribir Tailwind */

/* ===== MODO CLARO ===== */
/* Sobrescribir cualquier clase de background de Tailwind en nav/header */
nav[class*="bg-"],
header[class*="bg-"],
nav,
header {
    background-color: hsl(270, 2.9%, 91.3%) !important;
    --tw-bg-opacity: 1 !important;
    color: #172B4D !important;
}

/* Asegurar que el color se aplica específicamente a elementos con clases de Tailwind cyan/blue */
.bg-cyan-700,
.bg-cyan-600,
.bg-blue-700,
.bg-blue-600,
nav.bg-cyan-700,
header.bg-cyan-700 {
    background-color: hsl(270, 2.9%, 91.3%) !important;
    --tw-bg-opacity: 1 !important;
    color: #172B4D !important;
}

/* Aplicar también a la clase específica trello-nav */
.trello-nav,
nav.trello-nav,
header.trello-nav {
    background-color: hsl(270, 2.9%, 91.3%) !important;
    --tw-bg-opacity: 1 !important;
    color: #172B4D !important;
}

/* Texto e iconos dentro del nav/header en modo claro */
nav *,
header *,
nav[class*="bg-"] *,
header[class*="bg-"] * {
    color: #172B4D !important;
}

/* MEJORA: Solo pintar iconos de interfaz, respetar otros SVGs (como logos o avatares) */
nav button svg,
header button svg,
nav .relative svg { /* El icono de la lupa */
    color: #42526E !important;
    fill: transparent !important; /* Lucide usa stroke, no fill normalmente */
    stroke: #42526E !important;
}

/* ===== MODO OSCURO ===== */
/* Fondo oscuro para nav/header en modo dark */
.dark nav[class*="bg-"],
.dark header[class*="bg-"],
.dark nav,
.dark header {
    background-color: #1D2125 !important;
    --tw-bg-opacity: 1 !important;
    color: #9FADBC !important;
}

.dark .bg-cyan-700,
.dark .bg-cyan-600,
.dark .bg-blue-700,
.dark .bg-blue-600,
.dark nav.bg-cyan-700,
.dark header.bg-cyan-700 {
    background-color: #1D2125 !important;
    --tw-bg-opacity: 1 !important;
    color: #9FADBC !important;
}

.dark .trello-nav,
.dark nav.trello-nav,
.dark header.trello-nav {
    background-color: #1D2125 !important;
    --tw-bg-opacity: 1 !important;
    color: #9FADBC !important;
}

/* Texto e iconos dentro del nav/header en modo oscuro */
.dark nav *,
.dark header *,
.dark nav[class*="bg-"] *,
.dark header[class*="bg-"] * {
    color: #9FADBC !important;
}

.dark nav button svg,
.dark header button svg,
.dark nav .relative svg {
    color: #9FADBC !important;
    stroke: #9FADBC !important;
}


/* ========================================= */
/* 12. ESTILOS PARA BARRA DE BÚSQUEDA - SOLO MODO CLARO */
/* ========================================= */

/* Barra de búsqueda en MODO CLARO - mejor visibilidad */
nav input,
header input {
    background-color: #FFFFFF !important;
    border: 2px solid #DFE1E6 !important;
    color: #172B4D !important;
    --tw-bg-opacity: 1 !important;
    --tw-border-opacity: 1 !important;
    --tw-text-opacity: 1 !important;
}

/* Placeholder visible en modo claro */
nav input::placeholder,
header input::placeholder {
    color: #6B778C !important;
    opacity: 1 !important;
    --tw-placeholder-opacity: 1 !important;
}

/* Hover en modo claro */
nav input:hover,
header input:hover {
    border-color: #B3BAC5 !important;
}

/* Focus en modo claro */
nav input:focus,
header input:focus {
    border-color: #0079BF !important;
    outline: none !important;
    box-shadow: 0 0 0 3px rgba(0, 121, 191, 0.15) !important;
    --tw-ring-shadow: none !important;
    --tw-ring-offset-shadow: none !important;
}

/* Sobrescribir clases específicas de Tailwind solo en modo claro */
nav input[class*="bg-"],
header input[class*="bg-"] {
    background-color: #FFFFFF !important;
}

nav input[class*="border-"],
header input[class*="border-"] {
    border-color: #DFE1E6 !important;
    border-width: 2px !important;
}

nav input[class*="text-"],
header input[class*="text-"] {
    color: #172B4D !important;
}

/* --- NUEVO: CURSORES PARA DRAG TO SCROLL --- */
.board-canvas {
    cursor: grab; /* Mano abierta por defecto */
}

.board-canvas.active {
    cursor: grabbing !important; /* Mano cerrada al arrastrar */
    user-select: none; /* Evita seleccionar texto al arrastrar */
}

/* Asegurar que las listas y tarjetas no hereden el cursor de "Mover fondo" */
.list, .list-card {
    cursor: default; 
}
.list-card {
    cursor: pointer; /* O grab si es arrastrable */
}

/* === MODO OSCURO: RESULTADOS DE BÚSQUEDA === */
.dark #search-results {
    background-color: #1e293b !important; /* Slate 800 */
    border-color: #334155 !important; /* Slate 700 */
}

.dark .search-result-item {
    color: #f1f5f9 !important; /* Slate 100 */
    border-bottom-color: rgba(255, 255, 255, 0.08) !important;
}

.dark .search-result-item:hover {
    background-color: #334155 !important; /* Slate 700 */
}

.dark .search-result-item.keyboard-selected {
    background-color: #1e3a8a !important; /* Blue 900 */
    border-left-color: #3b82f6 !important; /* Blue 500 */
}

.dark .search-result-highlight {
    background-color: #854d0e !important; /* Yellow 900 */
    color: #fef3c7 !important; /* Yellow 100 */
}

/* Badges de tipo en modo oscuro */
.dark .result-type-badge {
    opacity: 0.9;
}

.dark .result-type-board {
    background-color: #0e7490 !important; /* Cyan 700 */
    color: #cffafe !important; /* Cyan 100 */
}

.dark .result-type-list {
    background-color: #854d0e !important; /* Yellow 800 */
    color: #fef3c7 !important; /* Yellow 100 */
}

.dark .result-type-card {
    background-color: #334155 !important; /* Slate 700 */
    color: #cbd5e1 !important; /* Slate 300 */
}

/* Breadcrumbs en modo oscuro */
.dark .result-breadcrumbs {
    color: #94a3b8 !important; /* Slate 400 */
}

/* === MODO OSCURO: ACTIVIDAD === */
.dark .activity-item {
    color: #f1f5f9 !important; /* Slate 100 */
    border-bottom-color: rgba(255, 255, 255, 0.08) !important;
}

.dark .activity-user {
    color: #60a5fa !important; /* Blue 400 */
}

.dark .activity-meta {
    color: #94a3b8 !important; /* Slate 400 */
}

/* Contador de resultados */
.dark #search-results-count {
    color: #94a3b8 !important;
    border-top-color: rgba(255, 255, 255, 0.08) !important;
}

/* MEJORA DRAG & DROP - ZONA MÁS GRANDE */
.cards-container {
  min-height: 100px !important; /* Zona de drop más grande */
  padding: 8px !important;
}

.cards-container.drag-over {
  background-color: rgba(9, 30, 66, 0.08) !important;
  border: 2px dashed rgba(0, 121, 191, 0.5) !important;
  border-radius: 8px;
  transition: all 0.2s ease;
}

/* Lista vacía más visible */
.cards-container:empty {
  min-height: 120px !important;
  background-color: rgba(9, 30, 66, 0.02);
  border: 2px dashed transparent;
  border-radius: 8px;
}

.cards-container:empty.drag-over {
  border-color: rgba(0, 121, 191, 0.5) !important;
  background-color: rgba(0, 121, 191, 0.05) !important;
}